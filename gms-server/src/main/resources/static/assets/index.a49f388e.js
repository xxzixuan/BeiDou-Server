import{A as w,v as fe}from"./index.53c86f70.js";/* empty css               *//* empty css               */import{u as pe}from"./loading.7b660b93.js";/* empty css              *//* empty css              *//* empty css              *//* empty css               *//* empty css               */import{d as me,j as c,r as be,b2 as ve,C as d,D as _,aM as t,aL as n,aO as V,aN as k,aE as b,aQ as s,aR as u,u as ye,aF as Q,G as Ce,bP as _e,bQ as Te,b6 as ze,b5 as Ve,aZ as ke,b9 as we,bJ as $e,bI as Se,bL as he,bM as je,bC as De,bD as Le,aX as Ne,bR as Ue,ba as Be,bE as Ie,bN as Fe}from"./arco.87c3ce50.js";import"./chart.7bbcdda7.js";import"./vue.5b803e24.js";function Ae(){return w.get("/config/v1/getConfigTypeList")}function Oe(g){return w.post("/config/v1/getConfigList",g)}function qe(g){return w.post("/config/v1/addConfig",g)}function Me(g){return w.post("/config/v1/updateConfig",g)}function Re(g){return w.post("/config/v1/deleteConfigList",g)}const Ee={class:"container"},Ge={name:"Config"},ta=me({...Ge,setup(g){const{t:v}=fe.exports.useI18n(),U=c([]),B=c([]),I=c([]),F=c([]),i=c({type:"all",subType:"All",filter:"",pageNo:1,pageSize:20}),A=c([]),O=c(0),{loading:J,setLoading:q}=pe(!1),y=c([]),T=c(!1),$=c(""),l=be({id:0,configType:"server",configSubType:"Game Mechanics",configClazz:"java.lang.String",configCode:"",configValue:"",configDesc:""}),X=c(["java.lang.Integer","java.lang.String","java.lang.Float","java.lang.Boolean"]),S=c(!1),Z=async()=>{const{data:e}=await Ae();B.value=e.types,U.value=["all",...e.types],F.value=e.subTypes,I.value=["All",...e.subTypes]},C=(e,o)=>{e=e.replace(" ","");let p;return o?Number.isFinite(Number(e))?p=v("config.type.world")+e:p=v(`config.subType.${e}`):p=v(`config.type.${e}`),p==null?e:p},M=e=>{const o=h(e);return v(`config.clz.${o}`)},h=e=>{let o;switch(e){case"java.lang.Integer":case"java.lang.Long":case"java.lang.Byte":case"java.lang.Short":o="int";break;case"java.lang.Float":case"java.lang.Double":o="float";break;case"java.lang.Boolean":o="bool";break;default:o="string";break}return o},f=async()=>{const e={...i.value,type:i.value.type==="all"?"":i.value.type,subType:i.value.subType==="All"?"":i.value.subType},{data:o}=await Oe(e);A.value=o.records,O.value=o.totalRow,y.value=[]},H=e=>{i.value.pageNo=e,f()},W=e=>{i.value.pageNo=1,i.value.pageSize=e,f()},Y=async()=>{q(!0);try{await f()}finally{q(!1)}},x=()=>{i.value.type="all",i.value.subType="All",i.value.filter="",i.value.pageNo=1,i.value.pageSize=20},ee=async e=>{i.value.type=String(e),await f()},ae=async e=>{i.value.subType=String(e),await f()},le=()=>{R(),T.value=!0,$.value=v("button.add")},te=async()=>{S.value=!0},ne=e=>{l.id=e.id,l.configType=e.configType,l.configSubType=e.configSubType,l.configClazz=e.configClazz,l.configCode=e.configCode,l.configValue=e.configValue,l.configDesc=e.configDesc,T.value=!0,$.value=v("button.edit")},oe=async()=>{l.id?await Me(l):await qe(l),R(),T.value=!1,await f()},R=()=>{l.id=0,l.configType="server",l.configSubType="Game Mechanics",l.configClazz="java.lang.String",l.configCode="",l.configValue="",l.configDesc=""},ie=async()=>{await Re(y.value),await f()};return Z(),(e,o)=>{const p=ve("Breadcrumb"),E=_e,G=Te,r=ze,j=Ve,z=ke,K=we,D=$e,m=Se,ue=he,se=je,L=De,N=Le,de=Ne,ce=Ue,re=Be,P=Ie,ge=Fe;return d(),_("div",Ee,[t(p),t(ge,{class:"general-card",title:e.$t("menu.game.config")},{default:n(()=>[t(K,{direction:"vertical",align:"start"},{default:n(()=>[t(r,{label:e.$t("config.search.type.label")},{default:n(()=>[(d(!0),_(V,null,k(U.value,a=>(d(),b(G,{key:a,type:"button","model-value":i.value.type,onChange:ee},{default:n(()=>[t(E,{value:a},{default:n(()=>[s(u(C(a,!1)),1)]),_:2},1032,["value"])]),_:2},1032,["model-value"]))),128))]),_:1},8,["label"]),t(r,{label:e.$t("config.search.subType.label")},{default:n(()=>[(d(!0),_(V,null,k(I.value,a=>(d(),b(G,{key:a,type:"button","model-value":i.value.subType,onChange:ae},{default:n(()=>[t(E,{value:a},{default:n(()=>[s(u(C(a,!0)),1)]),_:2},1032,["value"])]),_:2},1032,["model-value"]))),128))]),_:1},8,["label"]),t(r,null,{default:n(()=>[t(K,null,{default:n(()=>[t(j,{modelValue:i.value.filter,"onUpdate:modelValue":o[0]||(o[0]=a=>i.value.filter=a),placeholder:e.$t("config.placeholder.filter")},null,8,["modelValue","placeholder"]),t(z,{type:"primary",onClick:Y},{default:n(()=>[s(u(e.$t("button.search")),1)]),_:1}),t(z,{onClick:x},{default:n(()=>[s(u(e.$t("button.reset")),1)]),_:1}),t(z,{type:"primary",status:"success",disabled:y.value.length>0,onClick:le},{default:n(()=>[s(u(e.$t("button.add")),1)]),_:1},8,["disabled"]),t(z,{type:"primary",status:"danger",disabled:y.value.length===0,onClick:te},{default:n(()=>[s(u(e.$t("button.delete")),1)]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1}),t(ue,{selectedKeys:y.value,"onUpdate:selectedKeys":o[1]||(o[1]=a=>y.value=a),"row-key":"id",loading:ye(J),data:A.value,"column-resizable":"",pagination:!1,bordered:{cell:!0},"row-selection":{type:"checkbox",showCheckedAll:!0,onlyCurrent:!1}},{columns:n(()=>[t(m,{title:e.$t("config.column.type"),"data-index":"configType",width:100,align:"center"},{cell:n(({record:a})=>[t(D,{color:"orangered"},{default:n(()=>[s(u(C(a.configType,!1)),1)]),_:2},1024)]),_:1},8,["title"]),t(m,{title:e.$t("config.column.subType"),"data-index":"configSubType",width:100,align:"center"},{cell:n(({record:a})=>[t(D,{color:"purple"},{default:n(()=>[s(u(C(a.configSubType,!0)),1)]),_:2},1024)]),_:1},8,["title"]),t(m,{title:e.$t("config.column.clazz"),"data-index":"configClazz",width:100,align:"center"},{cell:n(({record:a})=>[t(D,{color:"green"},{default:n(()=>[s(u(M(a.configClazz)),1)]),_:2},1024)]),_:1},8,["title"]),t(m,{title:e.$t("config.column.code"),"data-index":"configCode",width:100,align:"center"},null,8,["title"]),t(m,{title:e.$t("config.column.value"),"data-index":"configValue",width:100,align:"center"},null,8,["title"]),t(m,{title:e.$t("config.column.desc"),"data-index":"configDesc",width:200,align:"center"},null,8,["title"]),t(m,{title:e.$t("config.column.operate"),width:100,align:"center"},{cell:n(({record:a})=>[t(z,{type:"text",size:"mini",onClick:Ke=>ne(a)},{default:n(()=>[s(u(e.$t("button.edit")),1)]),_:2},1032,["onClick"])]),_:1},8,["title"])]),_:1},8,["selectedKeys","loading","data"]),t(se,{style:{"margin-top":"20px"},total:O.value,"page-size":i.value.pageSize,current:i.value.pageNo,"show-total":"","show-jumper":"","show-page-size":"","page-size-options":[10,20,40,80,100],onChange:H,onPageSizeChange:W},null,8,["total","page-size","current"]),t(P,{visible:T.value,"onUpdate:visible":o[9]||(o[9]=a=>T.value=a),width:450,title:$.value,draggable:"","ok-text":e.$t("button.submit"),onOk:oe},{default:n(()=>[t(re,{model:l,"auto-label-width":!0},{default:n(()=>[t(r,{field:"configType",label:e.$t("config.column.type"),required:!0,disabled:l.id!=null&&l.id!=0},{default:n(()=>[t(N,{modelValue:l.configType,"onUpdate:modelValue":o[2]||(o[2]=a=>l.configType=a)},{default:n(()=>[(d(!0),_(V,null,k(B.value,a=>(d(),b(L,{key:a,value:a},{default:n(()=>[s(u(C(a,!1)),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["label","disabled"]),t(r,{field:"configSubType",label:e.$t("config.column.subType"),required:!0,disabled:l.id!=null&&l.id!=0},{default:n(()=>[t(N,{modelValue:l.configSubType,"onUpdate:modelValue":o[3]||(o[3]=a=>l.configSubType=a)},{default:n(()=>[(d(!0),_(V,null,k(F.value,a=>(d(),b(L,{key:a,value:a},{default:n(()=>[s(u(C(a,!0)),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["label","disabled"]),t(r,{field:"configClazz",label:e.$t("config.column.clazz"),required:!0,disabled:l.id!=null&&l.id!=0},{default:n(()=>[t(N,{modelValue:l.configClazz,"onUpdate:modelValue":o[4]||(o[4]=a=>l.configClazz=a)},{default:n(()=>[(d(!0),_(V,null,k(X.value,a=>(d(),b(L,{key:a,value:a},{default:n(()=>[s(u(M(a)),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["label","disabled"]),t(r,{field:"configCode",label:e.$t("config.column.code"),required:!0,disabled:l.id!=null},{default:n(()=>[t(j,{modelValue:l.configCode,"onUpdate:modelValue":o[5]||(o[5]=a=>l.configCode=a),"max-length":"64"},null,8,["modelValue"])]),_:1},8,["label","disabled"]),t(r,{field:"configValue",label:e.$t("config.column.value"),required:!0},{default:n(()=>[h(l.configClazz)!=="bool"?(d(),b(j,{key:0,modelValue:l.configValue,"onUpdate:modelValue":o[6]||(o[6]=a=>l.configValue=a),"max-length":256},null,8,["modelValue"])):Q("",!0),h(l.configClazz)==="bool"?(d(),b(de,{key:1,modelValue:l.configValue,"onUpdate:modelValue":o[7]||(o[7]=a=>l.configValue=a),"checked-value":"true","unchecked-value":"false"},null,8,["modelValue"])):Q("",!0)]),_:1},8,["label"]),t(r,{field:"configDesc",label:e.$t("config.column.desc")},{default:n(()=>[t(ce,{modelValue:l.configDesc,"onUpdate:modelValue":o[8]||(o[8]=a=>l.configDesc=a),"max-length":500},null,8,["modelValue"])]),_:1},8,["label"])]),_:1},8,["model"])]),_:1},8,["visible","title","ok-text"]),t(P,{visible:S.value,"onUpdate:visible":o[10]||(o[10]=a=>S.value=a),width:450,draggable:"",onOk:ie},{title:n(()=>[s(u(e.$t("button.delete")),1)]),default:n(()=>[Ce("div",null,u(e.$t("config.confirm.text")),1)]),_:1},8,["visible"])]),_:1},8,["title"])])}}});export{ta as default};
