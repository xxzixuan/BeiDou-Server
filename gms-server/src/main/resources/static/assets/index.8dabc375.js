import{A as u}from"./index.53c86f70.js";/* empty css               *//* empty css               *//* empty css               */import{u as F}from"./loading.7b660b93.js";import{d as N,j as y,b2 as E,C as g,D as L,aM as r,aL as t,aQ as s,aR as o,aE as S,u as v,G as M,aY as C,bJ as V,bF as q,bG as G,aZ as O,bE as T,b9 as j,bN as A}from"./arco.87c3ce50.js";import{f as J}from"./vue.5b803e24.js";import"./chart.7bbcdda7.js";function Q(){return u.get("/server/v1/online")}function U(){return u.get("/server/v1/startServer")}function Y(){return u.get("/server/v1/stopServer")}function Z(){return u.get("/server/v1/restartServer")}function z(){return u.get("/server/v1/shutdown")}const H={class:"container",loading:!0},I={name:"Dashboard"},oe=N({...I,setup(K){const{loading:d,setLoading:i}=F(!1),n=y(!1),f=y(!1),b=J(),m=async()=>{i(!0);try{const{data:e}=await Q();n.value=e}finally{i(!1)}};m();const $=async()=>{z(),await b.push({name:"login",query:{...b.currentRoute.value.query,redirect:b.currentRoute.value.path}})},c=async e=>{i(!0);try{switch(e){case"start":await U();break;case"stop":await Y();break;case"restart":await Z();break;case"shutdown":f.value=!0;return;default:break}C.success("\u64CD\u4F5C\u6210\u529F")}catch(a){window.console.log(a),C.error("\u8BF7\u6C42\u5931\u8D25")}finally{await m(),i(!1)}};return(e,a)=>{const h=E("Breadcrumb"),w=V,_=q,k=G,p=O,B=T,D=j,R=A;return g(),L("div",H,[r(h),r(R,{class:"general-card",title:e.$t("menu.dashboard.workplace")},{default:t(()=>[r(k,null,{default:t(()=>[r(_,null,{default:t(()=>[s(o(e.$t("workplace.gameServer.status"))+" ",1),n.value?(g(),S(w,{key:0,color:"green",bordered:""},{default:t(()=>[s(o(e.$t("workplace.running")),1)]),_:1})):(g(),S(w,{key:1,color:"gray",bordered:""},{default:t(()=>[s(o(e.$t("workplace.stopped")),1)]),_:1}))]),_:1})]),_:1}),r(k,null,{default:t(()=>[r(_,null,{default:t(()=>[r(D,null,{default:t(()=>[r(p,{loading:v(d),type:"primary",disabled:n.value,status:"success",onClick:a[0]||(a[0]=l=>c("start"))},{default:t(()=>[s(o(e.$t("workplace.button.start")),1)]),_:1},8,["loading","disabled"]),r(p,{loading:v(d),type:"primary",disabled:!n.value,status:"danger",onClick:a[1]||(a[1]=l=>c("stop"))},{default:t(()=>[s(o(e.$t("workplace.button.stop")),1)]),_:1},8,["loading","disabled"]),r(p,{loading:v(d),type:"primary",disabled:!n.value,status:"warning",onClick:a[2]||(a[2]=l=>c("restart"))},{default:t(()=>[s(o(e.$t("workplace.button.restart")),1)]),_:1},8,["loading","disabled"]),r(p,{loading:v(d),type:"primary",status:"danger",onClick:a[3]||(a[3]=l=>c("shutdown"))},{default:t(()=>[s(o(e.$t("workplace.button.shutdown")),1)]),_:1},8,["loading"]),r(B,{visible:f.value,"onUpdate:visible":a[4]||(a[4]=l=>f.value=l),width:450,draggable:"","ok-button-props":{status:"danger"},onOk:$},{title:t(()=>[s(o(e.$t("workplace.button.shutdown")),1)]),default:t(()=>[M("div",null,o(e.$t("workplace.button.shutdown.confirm")),1)]),_:1},8,["visible"])]),_:1})]),_:1})]),_:1})]),_:1},8,["title"])])}}});export{oe as default};
