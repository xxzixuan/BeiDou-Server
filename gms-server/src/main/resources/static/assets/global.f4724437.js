import"./index.d4e6d621.js";/* empty css               *//* empty css              *//* empty css              *//* empty css              *//* empty css               *//* empty css               */import{u as M}from"./loading.47953f7c.js";import{d as R,j as k,b2 as j,C as u,D as g,aM as t,aL as a,aQ as _,u as D,aE as s,aR as y,G as H,aF as C,aY as V,aW as J,aZ as O,b9 as W,bG as Y,bH as Z,bJ as K,bO as X,b5 as ee,bL as te,bM as ae,bN as le}from"./arco.7ab11c03.js";import{a as ne,b as ue,c as oe,e as ie}from"./drop.c60ec066.js";import{g as se}from"./mapleStoryAPI.7ca30bdd.js";import"./chart.35386b55.js";import"./vue.5b3e6270.js";const de={class:"container"},me={key:1},ce={key:1},pe=["src"],_e={key:1},ve={key:1},ge={key:1},ye={key:1},re={key:1},ke={name:"GlobalDrop"},Be=R({...ke,setup(Ce){const{setLoading:r,loading:b}=M(!1),n=k({dropperId:void 0,continent:void 0,itemId:void 0,questId:void 0,pageNo:1,pageSize:20,onlyTotal:!1,notPage:!1}),I=k(0),w=l=>{n.value.pageNo=l,v()},E=l=>{n.value.pageNo=1,n.value.pageSize=l,v()},i=k(0),f=k([]),v=async()=>{i.value=0,r(!0);try{const{data:l}=await ne(n.value);f.value=l.records,I.value=l.totalRow}finally{r(!1)}};v();const x=()=>{n.value.continent=void 0,n.value.itemId=void 0,n.value.questId=void 0,n.value.pageNo=1,v()},h=(l,m)=>{n.value.itemId=l,n.value.pageNo=1,l===0&&(m="\u91D1\u5E01"),V.success(`\u5DF2\u6309[\u7269\u54C1] ${m} (${l}) \u67E5\u8BE2\uFF0C\u5176\u4ED6\u6761\u4EF6\u4E0D\u53D8`),v()},F=l=>{i.value=l},N=()=>{i.value=0},U=async l=>{r(!0);try{l.id===0?(await ue(l),V.success("\u6570\u636E\u5DF2\u521B\u5EFA")):(await oe(l),V.success("\u6570\u636E\u5DF2\u66F4\u65B0")),await v()}finally{r(!1)}},z=async l=>{r(!0);try{await ie(l),V.success("\u6570\u636E\u5DF2\u5220\u9664"),await v()}finally{r(!1)}},B=()=>{var l;i.value=0,(l=f.value)==null||l.unshift({id:0,dropperId:void 0,dropperName:void 0,continent:n.value.continent||-1,itemId:n.value.itemId,itemName:void 0,minimumQuantity:1,maximumQuantity:1,questId:n.value.questId||0,questName:void 0,chance:void 0,comments:void 0})};return(l,m)=>{const q=j("Breadcrumb"),c=J,p=O,Q=W,$=Y,A=Z,d=K,G=X,S=ee,L=te,P=ae,T=le;return u(),g("div",de,[t(q),t(T,{class:"general-card",title:l.$t("menu.game.drop.global")},{default:a(()=>[t(A,null,{default:a(()=>[t($,null,{default:a(()=>[t(Q,null,{default:a(()=>[t(c,{modelValue:n.value.continent,"onUpdate:modelValue":m[0]||(m[0]=e=>n.value.continent=e),placeholder:"\u5730\u533AID","allow-clear":""},null,8,["modelValue"]),t(c,{modelValue:n.value.itemId,"onUpdate:modelValue":m[1]||(m[1]=e=>n.value.itemId=e),placeholder:"\u7269\u54C1ID","allow-clear":""},null,8,["modelValue"]),t(c,{modelValue:n.value.questId,"onUpdate:modelValue":m[2]||(m[2]=e=>n.value.questId=e),placeholder:"\u4EFB\u52A1ID","allow-clear":""},null,8,["modelValue"]),t(p,{type:"primary",onClick:v},{default:a(()=>[_("\u67E5\u8BE2")]),_:1}),t(p,{onClick:x},{default:a(()=>[_("\u91CD\u7F6E")]),_:1}),t(p,{type:"primary",status:"success",onClick:B},{default:a(()=>[_(" \u65B0\u589E ")]),_:1})]),_:1})]),_:1})]),_:1}),t(L,{"row-key":"id",loading:D(b),data:f.value,"column-resizable":"",pagination:!1,bordered:{cell:!0}},{columns:a(()=>[t(d,{title:"ID","data-index":"id",width:80,align:"center"}),t(d,{title:"\u5730\u533AID",width:160,align:"center"},{cell:a(({record:e})=>[i.value===e.id?(u(),s(c,{key:0,modelValue:e.continent,"onUpdate:modelValue":o=>e.continent=o},null,8,["modelValue","onUpdate:modelValue"])):(u(),g("span",me,y(e.continent),1))]),_:1}),t(d,{title:"\u7269\u54C1ID",width:140,align:"center"},{cell:a(({record:e})=>[i.value===e.id?(u(),s(c,{key:0,modelValue:e.itemId,"onUpdate:modelValue":o=>e.itemId=o},null,8,["modelValue","onUpdate:modelValue"])):(u(),g("span",ce,y(e.itemId),1))]),_:1}),t(d,{title:"\u7269\u54C1",width:180,align:"center"},{cell:a(({record:e})=>[e.itemId===0?(u(),s(p,{key:0,type:"text",size:"mini",status:"warning",onClick:o=>h(e.itemId,e.itemName)},{default:a(()=>[_(" \u91D1\u5E01 ")]),_:2},1032,["onClick"])):(u(),s(G,{key:1},{content:a(()=>[H("img",{src:D(se)("item",e.itemId),alt:""},null,8,pe)]),default:a(()=>[t(p,{type:"text",size:"mini",onClick:o=>h(e.itemId,e.itemName)},{default:a(()=>[_(y(e.itemName),1)]),_:2},1032,["onClick"])]),_:2},1024))]),_:1}),t(d,{title:"\u6700\u5C11",width:100,align:"center"},{cell:a(({record:e})=>[i.value===e.id?(u(),s(c,{key:0,modelValue:e.minimumQuantity,"onUpdate:modelValue":o=>e.minimumQuantity=o},null,8,["modelValue","onUpdate:modelValue"])):(u(),g("span",_e,y(e.minimumQuantity),1))]),_:1}),t(d,{title:"\u6700\u591A","data-index":"maximumQuantity",width:100,align:"center"},{cell:a(({record:e})=>[i.value===e.id?(u(),s(c,{key:0,modelValue:e.maximumQuantity,"onUpdate:modelValue":o=>e.maximumQuantity=o},null,8,["modelValue","onUpdate:modelValue"])):(u(),g("span",ve,y(e.maximumQuantity),1))]),_:1}),t(d,{title:"\u7206\u7387%",width:140,align:"right"},{cell:a(({record:e})=>[i.value===e.id?(u(),s(c,{key:0,modelValue:e.chance,"onUpdate:modelValue":o=>e.chance=o},null,8,["modelValue","onUpdate:modelValue"])):(u(),g("span",ge,y((e.chance/1e4).toFixed(4)),1))]),_:1}),t(d,{title:"\u4EFB\u52A1ID",width:120,align:"center"},{cell:a(({record:e})=>[i.value===e.id?(u(),s(c,{key:0,modelValue:e.questId,"onUpdate:modelValue":o=>e.questId=o},null,8,["modelValue","onUpdate:modelValue"])):(u(),g("span",ye,y(e.questId),1))]),_:1}),t(d,{title:"\u4EFB\u52A1",width:120,"data-index":"questName",align:"center"}),t(d,{title:"\u5907\u6CE8",width:180,"data-index":"comments",align:"center"},{cell:a(({record:e})=>[i.value===e.id?(u(),s(S,{key:0,modelValue:e.comments,"onUpdate:modelValue":o=>e.comments=o},null,8,["modelValue","onUpdate:modelValue"])):(u(),g("span",re,y(e.comments),1))]),_:1}),t(d,{title:"\u64CD\u4F5C",width:200,fixed:"right"},{cell:a(({record:e})=>[i.value!==e.id?(u(),s(p,{key:0,type:"text",size:"mini",onClick:o=>F(e.id)},{default:a(()=>[_(" \u7F16\u8F91 ")]),_:2},1032,["onClick"])):C("",!0),i.value===e.id?(u(),s(p,{key:1,type:"text",size:"mini",onClick:N},{default:a(()=>[_(" \u53D6\u6D88 ")]),_:1})):C("",!0),i.value===e.id?(u(),s(p,{key:2,type:"text",size:"mini",status:"success",onClick:o=>U(e)},{default:a(()=>[_(" \u4FDD\u5B58 ")]),_:2},1032,["onClick"])):C("",!0),i.value===e.id?(u(),s(p,{key:3,type:"text",size:"mini",status:"danger",onClick:o=>z(e)},{default:a(()=>[_(" \u5220\u9664 ")]),_:2},1032,["onClick"])):C("",!0)]),_:1})]),_:1},8,["loading","data"]),t(P,{style:{"margin-top":"20px"},total:I.value,"page-size":n.value.pageSize,current:n.value.pageNo,"show-total":"","show-jumper":"","show-page-size":"","page-size-options":[20,40,60,100],onChange:w,onPageSizeChange:E},null,8,["total","page-size","current"])]),_:1},8,["title"])])}}});export{Be as default};
