import{A as V}from"./index.53c86f70.js";/* empty css               *//* empty css              *//* empty css              *//* empty css               */import{u as J}from"./loading.7b660b93.js";/* empty css               *//* empty css               */import{d as K,j as I,b2 as O,C as i,D as _,aM as t,aL as l,aQ as h,aE as g,aF as C,bo as X,u as b,G as U,bp as ee,aR as D,aY as F,aW as te,b5 as ae,aZ as le,bH as oe,b9 as ie,bF as ne,bG as ue,bI as se,bL as de,bM as pe,bN as ce}from"./arco.87c3ce50.js";import{g as B}from"./mapleStoryAPI.7ca30bdd.js";import"./chart.7bbcdda7.js";import"./vue.5b803e24.js";function me(c){return V.post("/shop/v1/getShopList",c)}function ve(c){return V.post("/shop/v1/getShopItemList",c)}function _e(c){return V.delete(`/shop/v1/deleteShopItem/${c}`)}function re(c){return V.put("/shop/v1/addShopItem",c)}function he(c){return V.post("/shop/v1/updateShopItem",c)}const ge={class:"container",loading:!0},Ce=["src"],Ie=["src"],fe={key:0},ye={key:1},ke={key:0},Ve={key:1},we={key:0},Ne={key:1},be={key:0},De={key:1},Se={name:"NpcShop"},je=K({...Se,setup(c){const{loading:x,setLoading:m}=J(!1),S=I(0),L=a=>{o.value.pageNo=a,v.value===-1?f():k()},P=a=>{o.value.pageNo=1,o.value.pageSize=a,v.value===-1?f():k()},v=I(-1),o=I({pageNo:1,pageSize:20,onlyTotal:!1,notPage:!1,shopId:void 0,npcId:void 0,npcName:void 0,itemId:void 0,itemName:void 0}),$=()=>{o.value.pageNo=1,f()},T=()=>{o.value={pageNo:1,pageSize:20,onlyTotal:!1,notPage:!1,shopId:void 0,npcId:void 0,npcName:void 0,itemId:void 0,itemName:void 0},f()},z=I(),f=async()=>{m(!0);try{v.value=-1;const{data:a}=await me(o.value);z.value=a.records,S.value=a.totalRow}finally{m(!1)}};f();const M=a=>{v.value=a,o.value.shopId=a,k()},y=I(),k=async()=>{m(!0);try{const{data:a}=await ve(o.value);y.value=a.records,S.value=a.totalRow}finally{m(!1)}},d=I(-1),R=()=>{var a;(a=y.value)==null||a.unshift({id:-1,shopId:v.value,itemId:void 0,price:0,pitch:0,position:1,itemName:void 0,itemDesc:void 0})},j=async a=>{m(!0);try{a.id===-1?(await re(a),F.success("\u65B0\u589E\u5546\u54C1\u6210\u529F")):(await he(a),F.success("\u66F4\u65B0\u5546\u54C1\u6210\u529F"))}finally{d.value=-1,m(!1),await k()}},G=async a=>{m(!0);try{await _e(a),F.success("\u5546\u54C1\u5DF2\u5220\u9664")}finally{m(!1),await k()}},A=async a=>{var u,w;if(m(!0),a.id===-1){const p=(u=y.value)==null?void 0:u.findIndex(N=>N===a);p!=null&&p>-1&&((w=y.value)==null||w.splice(p,1))}d.value=-1,m(!1)};return(a,u)=>{const w=O("Breadcrumb"),p=te,N=ae,r=le,H=oe,Q=ie,W=ne,Y=ue,n=se,E=de,Z=pe,q=ce;return i(),_("div",ge,[t(w),t(q,{class:"general-card",title:a.$t("menu.game.npcShop")},{default:l(()=>[t(Y,null,{default:l(()=>[t(W,null,{default:l(()=>[t(Q,null,{default:l(()=>[t(p,{modelValue:o.value.shopId,"onUpdate:modelValue":u[0]||(u[0]=e=>o.value.shopId=e),placeholder:"\u5546\u5E97 ID"},null,8,["modelValue"]),t(p,{modelValue:o.value.npcId,"onUpdate:modelValue":u[1]||(u[1]=e=>o.value.npcId=e),placeholder:"NPC ID"},null,8,["modelValue"]),t(N,{modelValue:o.value.npcName,"onUpdate:modelValue":u[2]||(u[2]=e=>o.value.npcName=e),placeholder:"NPC"},null,8,["modelValue"]),t(p,{modelValue:o.value.itemId,"onUpdate:modelValue":u[3]||(u[3]=e=>o.value.itemId=e),placeholder:"\u7269\u54C1 ID"},null,8,["modelValue"]),t(N,{modelValue:o.value.itemName,"onUpdate:modelValue":u[4]||(u[4]=e=>o.value.itemName=e),placeholder:"\u7269\u54C1"},null,8,["modelValue"]),t(r,{type:"primary",status:"success",onClick:$},{default:l(()=>[h(" \u641C\u7D22 ")]),_:1}),t(r,{onClick:T},{default:l(()=>[h("\u91CD\u7F6E")]),_:1}),v.value>0?(i(),g(H,{key:0,style:{height:"24px"},direction:"vertical"})):C("",!0),v.value>0?(i(),g(r,{key:1,type:"primary",onClick:R},{default:l(()=>[h(" \u65B0\u589E ")]),_:1})):C("",!0)]),_:1})]),_:1})]),_:1}),X(t(E,{"row-key":"id",loading:b(x),data:z.value,"column-resizable":"",pagination:!1,bordered:{cell:!0}},{columns:l(()=>[t(n,{title:"\u5546\u5E97ID","data-index":"shopId",width:100,align:"center"}),t(n,{title:"NPC ID","data-index":"npcId",width:100,align:"center"}),t(n,{title:"NPC","data-index":"npcName",width:200,align:"center"}),t(n,{title:"NPC\u56FE\u7247","data-index":"npcId",width:100,align:"center"},{cell:l(({record:e})=>[U("img",{src:b(B)("npc",e.npcId)},null,8,Ce)]),_:1}),t(n,{title:"\u64CD\u4F5C"},{cell:l(({record:e})=>[t(r,{type:"text",size:"mini",onClick:s=>M(e.shopId)},{default:l(()=>[h(" \u67E5\u770B ")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["loading","data"]),[[ee,v.value<=0]]),v.value>0?(i(),g(E,{key:0,"row-key":"id",loading:b(x),data:y.value,"column-resizable":"",pagination:!1,bordered:{cell:!0}},{columns:l(()=>[t(n,{title:"ID","data-index":"id",width:80,align:"center"}),t(n,{title:"\u5546\u5E97ID","data-index":"shopId",width:100,align:"center"}),t(n,{title:"\u7269\u54C1\u56FE\u7247",align:"center",width:100},{cell:l(({record:e})=>[U("img",{src:b(B)("item",e.itemId)},null,8,Ie)]),_:1}),t(n,{title:"\u7269\u54C1ID",width:140,align:"center"},{cell:l(({record:e})=>[e.id===void 0||d.value===e.id?(i(),_("span",fe,[t(p,{modelValue:e.itemId,"onUpdate:modelValue":s=>e.itemId=s},null,8,["modelValue","onUpdate:modelValue"])])):(i(),_("span",ye,D(e.itemId),1))]),_:1}),t(n,{title:"\u7269\u54C1","data-index":"itemName",width:120,align:"center"}),t(n,{title:"\u4EF7\u683C",width:140,align:"center"},{cell:l(({record:e})=>[e.id===void 0||d.value===e.id?(i(),_("span",ke,[t(p,{modelValue:e.price,"onUpdate:modelValue":s=>e.price=s},null,8,["modelValue","onUpdate:modelValue"])])):(i(),_("span",Ve,D(e.price),1))]),_:1}),t(n,{title:"\u97F3\u7B26",width:140,align:"center"},{cell:l(({record:e})=>[e.id===void 0||d.value===e.id?(i(),_("span",we,[t(p,{modelValue:e.pitch,"onUpdate:modelValue":s=>e.pitch=s},null,8,["modelValue","onUpdate:modelValue"])])):(i(),_("span",Ne,D(e.pitch),1))]),_:1}),t(n,{title:"\u4F4D\u7F6E",width:140,align:"center"},{cell:l(({record:e})=>[e.id===void 0||d.value===e.id?(i(),_("span",be,[t(p,{modelValue:e.position,"onUpdate:modelValue":s=>e.position=s},null,8,["modelValue","onUpdate:modelValue"])])):(i(),_("span",De,D(e.position),1))]),_:1}),t(n,{title:"\u63CF\u8FF0","data-index":"itemDesc"}),t(n,{title:"\u64CD\u4F5C"},{cell:l(({record:e})=>[e.id!==void 0&&d.value!==e.id?(i(),g(r,{key:0,type:"text",size:"mini",status:"normal",onClick:s=>d.value=e.id},{default:l(()=>[h(" \u7F16\u8F91 ")]),_:2},1032,["onClick"])):C("",!0),e.id!==void 0&&d.value!==e.id?(i(),g(r,{key:1,type:"text",size:"mini",status:"danger",onClick:s=>G(e.id)},{default:l(()=>[h(" \u5220\u9664 ")]),_:2},1032,["onClick"])):C("",!0),e.id===void 0||d.value===e.id?(i(),g(r,{key:2,type:"text",size:"mini",status:"success",onClick:s=>j(e)},{default:l(()=>[h(" \u4FDD\u5B58 ")]),_:2},1032,["onClick"])):C("",!0),e.id!==void 0&&d.value===e.id?(i(),g(r,{key:3,type:"text",size:"mini",status:"normal",onClick:s=>A(e)},{default:l(()=>[h(" \u8FD4\u56DE ")]),_:2},1032,["onClick"])):C("",!0)]),_:1})]),_:1},8,["loading","data"])):C("",!0),t(Z,{style:{"margin-top":"20px"},total:S.value,"page-size":o.value.pageSize,current:o.value.pageNo,"show-total":"","show-jumper":"","show-page-size":"","page-size-options":[7,14,35,70],onChange:L,onPageSizeChange:P},null,8,["total","page-size","current"])]),_:1},8,["title"])])}}});export{je as default};
