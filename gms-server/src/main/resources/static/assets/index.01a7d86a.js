import"./index.53c86f70.js";/* empty css               *//* empty css              *//* empty css              *//* empty css               *//* empty css               */import{u as G}from"./loading.7b660b93.js";/* empty css               */import{d as O,j as C,b2 as W,C as n,D as g,aM as a,aL as t,aQ as c,u as V,aE as s,aR as v,G as E,aF as I,aY as k,aW as Y,aZ as Z,b9 as H,bF as J,bG as K,bI as X,bO as ee,bL as te,bM as ae,bN as le}from"./arco.87c3ce50.js";import{g as ue,i as ne,u as oe,d as ie}from"./drop.b9c97f0d.js";import{g as F}from"./mapleStoryAPI.7ca30bdd.js";import"./chart.7bbcdda7.js";import"./vue.5b803e24.js";const se={class:"container"},de={key:1},me=["src"],pe={key:1},ce=["src"],_e={key:1},re={key:1},ve={key:1},ge={key:1},ye={name:"Drop"},Be=O({...ye,setup(ke){const{setLoading:y,loading:b}=G(!1),u=C({dropperId:void 0,continent:void 0,itemId:void 0,questId:void 0,pageNo:1,pageSize:20,onlyTotal:!1,notPage:!1}),D=C(0),x=l=>{u.value.pageNo=l,_()},N=l=>{u.value.pageNo=1,u.value.pageSize=l,_()},i=C(0),f=C([]),_=async()=>{i.value=0,y(!0);try{const{data:l}=await ue(u.value);f.value=l.records,D.value=l.totalRow}finally{y(!1)}};_();const z=()=>{u.value.dropperId=void 0,u.value.itemId=void 0,u.value.questId=void 0,u.value.pageNo=1,_()},B=(l,d)=>{u.value.dropperId=l,u.value.pageNo=1,k.success(`\u5DF2\u6309[\u602A\u7269] ${d} (${l}) \u67E5\u8BE2\uFF0C\u5176\u4ED6\u6761\u4EF6\u4E0D\u53D8`),_()},h=(l,d)=>{u.value.itemId=l,u.value.pageNo=1,l===0&&(d="\u91D1\u5E01"),k.success(`\u5DF2\u6309[\u7269\u54C1] ${d} (${l}) \u67E5\u8BE2\uFF0C\u5176\u4ED6\u6761\u4EF6\u4E0D\u53D8`),_()},U=l=>{i.value=l},q=()=>{i.value=0},$=async l=>{y(!0);try{l.id===0?(await ne(l),k.success("\u6570\u636E\u5DF2\u521B\u5EFA")):(await oe(l),k.success("\u6570\u636E\u5DF2\u66F4\u65B0")),await _()}finally{y(!1)}},Q=async l=>{y(!0);try{await ie(l),k.success("\u6570\u636E\u5DF2\u5220\u9664"),await _()}finally{y(!1)}},A=()=>{var l;i.value=0,(l=f.value)==null||l.unshift({id:0,dropperId:u.value.dropperId,dropperName:void 0,continent:void 0,itemId:u.value.itemId,itemName:void 0,minimumQuantity:1,maximumQuantity:1,questId:u.value.questId||0,questName:void 0,chance:void 0,comments:void 0})};return(l,d)=>{const S=W("Breadcrumb"),r=Y,p=Z,L=H,M=J,P=K,m=X,w=ee,T=te,R=ae,j=le;return n(),g("div",se,[a(S),a(j,{class:"general-card",title:l.$t("menu.game.drop")},{default:t(()=>[a(P,null,{default:t(()=>[a(M,null,{default:t(()=>[a(L,null,{default:t(()=>[a(r,{modelValue:u.value.dropperId,"onUpdate:modelValue":d[0]||(d[0]=e=>u.value.dropperId=e),placeholder:"\u602A\u7269ID","allow-clear":""},null,8,["modelValue"]),a(r,{modelValue:u.value.itemId,"onUpdate:modelValue":d[1]||(d[1]=e=>u.value.itemId=e),placeholder:"\u7269\u54C1ID","allow-clear":""},null,8,["modelValue"]),a(r,{modelValue:u.value.questId,"onUpdate:modelValue":d[2]||(d[2]=e=>u.value.questId=e),placeholder:"\u4EFB\u52A1ID","allow-clear":""},null,8,["modelValue"]),a(p,{type:"primary",onClick:_},{default:t(()=>[c("\u67E5\u8BE2")]),_:1}),a(p,{onClick:z},{default:t(()=>[c("\u91CD\u7F6E")]),_:1}),a(p,{type:"primary",status:"success",onClick:A},{default:t(()=>[c(" \u65B0\u589E ")]),_:1})]),_:1})]),_:1})]),_:1}),a(T,{"row-key":"id",loading:V(b),data:f.value,"column-resizable":"",pagination:!1,bordered:{cell:!0}},{columns:t(()=>[a(m,{title:"ID","data-index":"id",width:80,align:"center"}),a(m,{title:"\u602A\u7269ID",width:120,align:"center"},{cell:t(({record:e})=>[i.value===e.id?(n(),s(r,{key:0,modelValue:e.dropperId,"onUpdate:modelValue":o=>e.dropperId=o},null,8,["modelValue","onUpdate:modelValue"])):(n(),g("span",de,v(e.dropperId),1))]),_:1}),a(m,{title:"\u602A\u7269",width:140,"data-index":"dropperName",align:"center"},{cell:t(({record:e})=>[a(w,null,{content:t(()=>[E("img",{src:V(F)("mob",e.dropperId),alt:""},null,8,me)]),default:t(()=>[a(p,{type:"text",size:"mini",onClick:o=>B(e.dropperId,e.dropperName)},{default:t(()=>[c(v(e.dropperName),1)]),_:2},1032,["onClick"])]),_:2},1024)]),_:1}),a(m,{title:"\u7269\u54C1ID",width:140,align:"center"},{cell:t(({record:e})=>[i.value===e.id?(n(),s(r,{key:0,modelValue:e.itemId,"onUpdate:modelValue":o=>e.itemId=o},null,8,["modelValue","onUpdate:modelValue"])):(n(),g("span",pe,v(e.itemId),1))]),_:1}),a(m,{title:"\u7269\u54C1",width:180,align:"center"},{cell:t(({record:e})=>[e.itemId===0?(n(),s(p,{key:0,type:"text",size:"mini",status:"warning",onClick:o=>h(e.itemId,e.itemName)},{default:t(()=>[c(" \u91D1\u5E01 ")]),_:2},1032,["onClick"])):(n(),s(w,{key:1},{content:t(()=>[E("img",{src:V(F)("item",e.itemId),alt:""},null,8,ce)]),default:t(()=>[a(p,{type:"text",size:"mini",onClick:o=>h(e.itemId,e.itemName)},{default:t(()=>[c(v(e.itemName),1)]),_:2},1032,["onClick"])]),_:2},1024))]),_:1}),a(m,{title:"\u6700\u5C11",width:100,align:"center"},{cell:t(({record:e})=>[i.value===e.id?(n(),s(r,{key:0,modelValue:e.minimumQuantity,"onUpdate:modelValue":o=>e.minimumQuantity=o},null,8,["modelValue","onUpdate:modelValue"])):(n(),g("span",_e,v(e.minimumQuantity),1))]),_:1}),a(m,{title:"\u6700\u591A","data-index":"maximumQuantity",width:100,align:"center"},{cell:t(({record:e})=>[i.value===e.id?(n(),s(r,{key:0,modelValue:e.maximumQuantity,"onUpdate:modelValue":o=>e.maximumQuantity=o},null,8,["modelValue","onUpdate:modelValue"])):(n(),g("span",re,v(e.maximumQuantity),1))]),_:1}),a(m,{title:"\u7206\u7387%",width:140,align:"right"},{cell:t(({record:e})=>[i.value===e.id?(n(),s(r,{key:0,modelValue:e.chance,"onUpdate:modelValue":o=>e.chance=o},null,8,["modelValue","onUpdate:modelValue"])):(n(),g("span",ve,v((e.chance/1e4).toFixed(4)),1))]),_:1}),a(m,{title:"\u4EFB\u52A1ID",width:120,align:"center"},{cell:t(({record:e})=>[i.value===e.id?(n(),s(r,{key:0,modelValue:e.questId,"onUpdate:modelValue":o=>e.questId=o},null,8,["modelValue","onUpdate:modelValue"])):(n(),g("span",ge,v(e.questId),1))]),_:1}),a(m,{title:"\u4EFB\u52A1",width:160,"data-index":"questName",align:"center"}),a(m,{title:"\u64CD\u4F5C",width:200,fixed:"right"},{cell:t(({record:e})=>[i.value!==e.id?(n(),s(p,{key:0,type:"text",size:"mini",onClick:o=>U(e.id)},{default:t(()=>[c(" \u7F16\u8F91 ")]),_:2},1032,["onClick"])):I("",!0),i.value===e.id?(n(),s(p,{key:1,type:"text",size:"mini",onClick:q},{default:t(()=>[c(" \u53D6\u6D88 ")]),_:1})):I("",!0),i.value===e.id?(n(),s(p,{key:2,type:"text",size:"mini",status:"success",onClick:o=>$(e)},{default:t(()=>[c(" \u4FDD\u5B58 ")]),_:2},1032,["onClick"])):I("",!0),i.value===e.id?(n(),s(p,{key:3,type:"text",size:"mini",status:"danger",onClick:o=>Q(e)},{default:t(()=>[c(" \u5220\u9664 ")]),_:2},1032,["onClick"])):I("",!0)]),_:1})]),_:1},8,["loading","data"]),a(R,{style:{"margin-top":"20px"},total:D.value,"page-size":u.value.pageSize,current:u.value.pageNo,"show-total":"","show-jumper":"","show-page-size":"","page-size-options":[20,40,60,100],onChange:x,onPageSizeChange:N},null,8,["total","page-size","current"])]),_:1},8,["title"])])}}});export{Be as default};
